"use strict";class y{constructor({selected:t,startDate:e,endDate:i,range:a}={}){this.date=this.getDateObj(new Date),this.selected=t||[],this.startDate=e,this.endDate=i,this.range=a,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(t){const e=this.getDateObj(t);this.getWeeks(e.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}setStartDate(t){this.startDate=t}setEndDate(t){this.endDate=t}getPreMonthObj(t){t=D(t),t=new Date(t);const e=t.getMonth();t.setMonth(e-1);const i=t.getMonth();return e!==0&&i-e===0&&t.setMonth(i-1),this.getDateObj(t)}getNextMonthObj(t){t=D(t),t=new Date(t);const e=t.getMonth();t.setMonth(e+1);const i=t.getMonth();return i-e>1&&t.setMonth(i-1),this.getDateObj(t)}getDateObj(t){return t=D(t),t=new Date(t),{fullDate:S(t),year:t.getFullYear(),month:o(t.getMonth()+1),date:o(t.getDate()),day:t.getDay()}}getPreMonthDays(t,e){const i=[];for(let a=t-1;a>=0;a--){const l=e.month-1;i.push({date:new Date(e.year,l,-a).getDate(),month:l,disable:!0})}return i}getCurrentMonthDays(t,e){const i=[],a=this.date.fullDate;for(let l=1;l<=t;l++){const n=`${e.year}-${e.month}-${o(l)}`,c=a===n,m=this.selected&&this.selected.find(r=>{if(this.dateEqual(n,r.date))return r});this.startDate&&h(this.startDate,n),this.endDate&&h(n,this.endDate);let g=this.multipleStatus.data,u=-1;this.range&&g&&(u=g.findIndex(r=>this.dateEqual(r,n)));const f=u!==-1;i.push({fullDate:n,year:e.year,date:l,multiple:this.range?f:!1,beforeMultiple:this.isLogicBefore(n,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(n,this.multipleStatus.before,this.multipleStatus.after),month:e.month,disable:this.startDate&&!h(this.startDate,n)||this.endDate&&!h(n,this.endDate),isToday:c,userChecked:!1,extraInfo:m})}return i}_getNextMonthDays(t,e){const i=[],a=e.month+1;for(let l=1;l<=t;l++)i.push({date:l,month:a,disable:!0});return i}getInfo(t){return t||(t=new Date),this.calendar.find(e=>e.fullDate===this.getDateObj(t).fullDate)}dateEqual(t,e){return t=new Date(D(t)),e=new Date(D(e)),t.valueOf()===e.valueOf()}isLogicBefore(t,e,i){let a=e;return e&&i&&(a=h(e,i)?e:i),this.dateEqual(a,t)}isLogicAfter(t,e,i){let a=i;return e&&i&&(a=h(e,i)?i:e),this.dateEqual(a,t)}geDateAll(t,e){var i=[],a=t.split("-"),l=e.split("-"),n=new Date;n.setFullYear(a[0],a[1]-1,a[2]);var c=new Date;c.setFullYear(l[0],l[1]-1,l[2]);for(var m=n.getTime()-24*60*60*1e3,g=c.getTime()-24*60*60*1e3,u=m;u<=g;)u=u+24*60*60*1e3,i.push(this.getDateObj(new Date(parseInt(u))).fullDate);return i}setMultiple(t){if(!this.range)return;let{before:e,after:i}=this.multipleStatus;if(e&&i){if(!this.lastHover){this.lastHover=!0;return}this.multipleStatus.before=t,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else e?(this.multipleStatus.after=t,h(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=t,this.lastHover=!1);this.getWeeks(t)}setHoverMultiple(t){if(!this.range||this.lastHover)return;const{before:e}=this.multipleStatus;e?(this.multipleStatus.after=t,h(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=t,this.getWeeks(t)}setDefaultMultiple(t,e){this.multipleStatus.before=t,this.multipleStatus.after=e,t&&e&&(h(t,e)?(this.multipleStatus.data=this.geDateAll(t,e),this.getWeeks(e)):(this.multipleStatus.data=this.geDateAll(e,t),this.getWeeks(t)))}getWeeks(t){const{year:e,month:i}=this.getDateObj(t),a=new Date(e,i-1,1).getDay(),l=this.getPreMonthDays(a,this.getDateObj(t)),n=new Date(e,i,0).getDate(),c=this.getCurrentMonthDays(n,this.getDateObj(t)),m=42-a-n,g=this._getNextMonthDays(m,this.getDateObj(t)),u=[...l,...c,...g],f=new Array(6);for(let r=0;r<u.length;r++){const p=Math.floor(r/7);f[p]||(f[p]=new Array(7)),f[p][r%7]=u[r]}this.calendar=u,this.weeks=f}}function w(s,t){return`${S(s)} ${M(s,t)}`}function S(s){s=D(s),s=new Date(s);const t=s.getFullYear(),e=s.getMonth()+1,i=s.getDate();return`${t}-${o(e)}-${o(i)}`}function M(s,t){s=D(s),s=new Date(s);const e=s.getHours(),i=s.getMinutes(),a=s.getSeconds();return t?`${o(e)}:${o(i)}`:`${o(e)}:${o(i)}:${o(a)}`}function o(s){return s<10&&(s=`0${s}`),s}function d(s){return s?"00:00":"00:00:00"}function h(s,t){return s=new Date(D(s)),t=new Date(D(t)),s<=t}function b(s){const t=/((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g;return s.match(t)}const A=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9]:[0-5]?[0-9])?$/;function D(s){return typeof s=="string"&&A.test(s)&&(s=s.replace(/-/g,"/")),s}exports.Calendar=y;exports.checkDate=b;exports.dateCompare=h;exports.fixIosDateFormat=D;exports.getDate=S;exports.getDateTime=w;exports.getDefaultSecond=d;exports.getTime=M;
