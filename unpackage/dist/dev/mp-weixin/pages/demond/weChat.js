"use strict";const e=require("../../common/vendor.js");require("../../app.js");const i={data(){return{scrollTop:0,userId:"",chatMsg:"",messageBoard:"您好，有什么需求请留言",msgList:[{botContent:"",recordId:0,titleId:0,userContent:"你好我要留言",userId:0}]}},computed:{windowHeight(){return this.rpxTopx(e.index.getSystemInfoSync().windowHeight)}},created(){let n=e.index.getStorageSync("demandType");console.log(n)},methods:{rpxTopx(n){let s=750/e.wx$1.getSystemInfoSync().windowWidth*Number(n);return Math.floor(s)},async handleSend(){let n=e.index.getStorageSync("demandType");if(console.log(n),!this.chatMsg||!/^\s+$/.test(this.chatMsg)){let r={botContent:0,recordId:0,titleId:0,userContent:this.chatMsg,userId:0};this.msgList.push(r);let s={botContent:"收到您的留言了，您的家人正在拯救宇宙，请等待回复。",recordId:0,titleId:0,userContent:0,userId:0};this.msgList.push(s),e.index.request({url:"http://118.25.148.102:8080/demand/addDemand",method:"POST",header:{"content-type":"application/json"},data:{userId:"2",demandDesc:this.chatMsg,demandType:n},success:o=>{console.log(o)},fail:o=>{console.log(o)}}),this.chatMsg=""}else this.$modal.showToast("不能发送空白消息")}}};function h(n,r,s,o,d,c){return{a:e.f(d.msgList,(t,a,u)=>e.e({a:t.userContent!=""},t.userContent!=""?{b:e.t(t.userContent)}:{},{c:t.botContent!=""},t.botContent!=""?{d:e.t(t.botContent)}:{},{e:a})),b:`${c.windowHeight}rpx`,c:d.scrollTop,d:d.chatMsg,e:e.o(t=>d.chatMsg=t.detail.value),f:e.o((...t)=>c.handleSend&&c.handleSend(...t))}}const l=e._export_sfc(i,[["render",h],["__scopeId","data-v-5f215478"],["__file","C:/Users/lcz/Documents/GitHub/ZHJZ/pages/demond/weChat.vue"]]);wx.createPage(l);
